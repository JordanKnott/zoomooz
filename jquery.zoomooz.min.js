var Sylvester={version:"0.1.3",precision:1e-6};function Matrix(){}Matrix.prototype={dup:function(){return Matrix.create(this.elements)},canMultiplyFromLeft:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=Matrix.create(t).elements),this.elements[0].length==t.length},multiply:function(e){var t=!!e.modulus,o=e.elements||e;if(void 0===o[0][0]&&(o=Matrix.create(o).elements),!this.canMultiplyFromLeft(o))return null;var r,n,a,i,s,l,u=this.elements.length,c=u,f=o[0].length,m=this.elements[0].length,d=[];do{d[r=c-u]=[],n=f;do{for(a=f-n,i=0,s=m;l=m-s,i+=this.elements[r][l]*o[l][a],--s;);d[r][a]=i}while(--n)}while(--u);return o=Matrix.create(d),t?o.col(1):o},isSquare:function(){return this.elements.length==this.elements[0].length},toRightTriangular:function(){var e,t,o,r,n=this.dup(),a=this.elements.length,i=a,s=this.elements[0].length;do{if(t=i-a,0===n.elements[t][t])for(j=t+1;j<i;j++)if(0!==n.elements[j][t]){for(e=[],o=s;r=s-o,e.push(n.elements[t][r]+n.elements[j][r]),--o;);n.elements[t]=e;break}if(0!==n.elements[t][t])for(j=t+1;j<i;j++){var l=n.elements[j][t]/n.elements[t][t];for(e=[],o=s;r=s-o,e.push(r<=t?0:n.elements[j][r]-n.elements[t][r]*l),--o;);n.elements[j]=e}}while(--a);return n},determinant:function(){if(!this.isSquare())return null;for(var e,t=this.toRightTriangular(),o=t.elements[0][0],r=t.elements.length-1,n=r;e=n-r+1,o*=t.elements[e][e],--r;);return o},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(e){var t=e.elements||e;void 0===t[0][0]&&(t=Matrix.create(t).elements);var o,r,n,a=this.dup(),i=a.elements[0].length,s=a.elements.length,l=s,u=t[0].length;if(s!=t.length)return null;do{for(o=l-s,r=u;n=u-r,a.elements[o][i+n]=t[o][n],--r;);}while(--s);return a},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var e,t,o,r,n,a,i,s=this.elements.length,l=s,u=this.augment(Matrix.I(s)).toRightTriangular(),c=u.elements[0].length,f=[];do{for(n=[],o=c,f[e=s-1]=[],a=u.elements[e][e];r=c-o,i=u.elements[e][r]/a,n.push(i),l<=r&&f[e].push(i),--o;);for(u.elements[e]=n,t=0;t<e;t++){for(n=[],o=c;r=c-o,n.push(u.elements[t][r]-u.elements[e][r]*u.elements[t][e]),--o;);u.elements[t]=n}}while(--s);return Matrix.create(f)},setElements:function(e){var t,o=e.elements||e;if(void 0!==o[0][0]){var r,n,a,i=o.length,s=i;this.elements=[];do{for(n=r=o[t=s-i].length,this.elements[t]=[];a=n-r,this.elements[t][a]=o[t][a],--r;);}while(--i);return this}var l=o.length,u=l;for(this.elements=[];t=u-l,this.elements.push([o[t]]),--l;);return this}},Matrix.create=function(e){return(new Matrix).setElements(e)},Matrix.I=function(e){var t,o,r,n=[],a=e;do{for(n[t=a-e]=[],o=a;r=a-o,n[t][r]=t==r?1:0,--o;);}while(--e);return Matrix.create(n)},PureCSSMatrix=function(){"use strict";var o=/deg$/,t=/([0-9.\-e]+)/g,l=/([a-zA-Z]+)\(([^\)]+)\)/g;function r(e){e&&null!==e&&"none"!=e?e instanceof Matrix?this.setMatrix(e):this.setMatrixValue(e):this.m=Matrix.I(3)}function u(e){var t=parseFloat(c(e));return e.match(o)&&(t=2*Math.PI*t/360),t}function c(e){return e.match(t)}function n(e){return Number(e).toFixed(6)}return r.prototype.setMatrix=function(e){this.m=e},r.prototype.setMatrixValue=function(e){for(var t,o=Matrix.I(3);null!==(t=l.exec(e));){var r,n=t[1].toLowerCase(),a=t[2].split(",");if("matrix"==n)r=Matrix.create([[parseFloat(a[0]),parseFloat(a[2]),parseFloat(c(a[4]))],[parseFloat(a[1]),parseFloat(a[3]),parseFloat(c(a[5]))],[0,0,1]]);else if("translate"==n)(r=Matrix.I(3)).elements[0][2]=parseFloat(c(a[0])),r.elements[1][2]=parseFloat(c(a[1]));else if("scale"==n){var i,s=parseFloat(a[0]);i=1<a.length?parseFloat(a[1]):s,r=Matrix.create([[s,0,0],[0,i,0],[0,0,1]])}else"rotate"==n?r=Matrix.RotationZ(u(a[0])):"skew"==n||"skewx"==n?(r=Matrix.I(3)).elements[0][1]=Math.tan(u(a[0])):"skewy"==n?(r=Matrix.I(3)).elements[1][0]=Math.tan(u(a[0])):console.log("Problem with setMatrixValue",n,a);o=o.multiply(r)}this.m=o},r.prototype.multiply=function(e){return new r(this.m.multiply(e.m))},r.prototype.inverse=function(){return Math.abs(this.m.elements[0][0])<1e-6&&(this.m.elements[0][0]=0),new r(this.m.inverse())},r.prototype.translate=function(e,t){var o=Matrix.I(3);return o.elements[0][2]=e,o.elements[1][2]=t,new r(this.m.multiply(o))},r.prototype.scale=function(e,t){var o=Matrix.create([[e,0,0],[0,t,0],[0,0,1]]);return new r(this.m.multiply(o))},r.prototype.rotate=function(e){var t=Matrix.RotationZ(e);return new r(this.m.multiply(t))},r.prototype.toString=function(){var e=this.m.elements,t="";return($.browser.mozilla||$.browser.opera)&&(t="px"),"matrix("+n(e[0][0])+", "+n(e[1][0])+", "+n(e[0][1])+", "+n(e[1][1])+", "+n(e[0][2])+t+", "+n(e[1][2])+t+")"},r.prototype.elements=function(){var e=this.m.elements;return{a:e[0][0],b:e[1][0],c:e[0][1],d:e[1][1],e:e[0][2],f:e[1][2]}},r}(),$.zoomooz||($.zoomooz={}),$.zoomooz.helpers=function(r,e){"use strict";var n=["-moz-","-webkit-","-o-","-ms-"];return e.forEachPrefix=function(e,t){for(var o=0;o<n.length;o++)e(n[o]);t&&e("")},e.getElementTransform=function(t){var o;return e.forEachPrefix(function(e){o=o||r(t).css(e+"transform")},!0),o},e}(jQuery,{}),function(l){"use strict";var u,c,e,f=/([0-9.\-e]+)/g,m=/([a-z]+)\(([^\)]+)\)/g,d=/deg$/,s=l.zoomooz.helpers,t={duration:450,easing:"ease",nativeanimation:!1};function h(t,e,o){var r,n={};if(s.forEachPrefix(function(e){n[e+"transform"]=t},!0),e){var a=b(e/1e3,6)+"s";n["-webkit-transition-duration"]=a,n["-o-transition-duration"]=a,n["-moz-transition-duration"]=a}if(o){var i=(r=o)instanceof Array?"cubic-bezier("+b(r[0],6)+","+b(r[1],6)+","+b(r[2],6)+","+b(r[3],6)+")":r;n["-webkit-transition-timing-function"]=i,n["-o-transition-timing-function"]=i,n["-moz-transition-timing-function"]=i}return n}function p(e,t,o,r,n){var a,i=(new Date).getTime()-u;a=r.easingfunction?r.easingfunction(i/r.duration):i/r.duration,e.css(h(v(function(e,t,o){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]+(t[n]-e[n])*o);return r}(t,o,a)))),i>r.duration&&(clearInterval(c),c=null,a=1,n&&n())}function g(e){var t=e.elements(),o=t.a,r=t.b,n=t.c,a=t.d,i=t.e,s=t.f;if(!(Math.abs(o*a-r*n)<.01)){var l=i,u=s,c=Math.sqrt(o*o+r*r),f=(o/=c)*n+(r/=c)*a;n-=o*f,a-=r*f;var m=Math.sqrt(n*n+a*a);return f/=m,o*(a/=m)-r*(n/=m)<0&&(o=-o,r=-r,n=-n,a=-a,c=-c,m=-m),{tx:l,ty:u,r:Math.atan2(r,o),k:Math.atan(f),sx:c,sy:m}}console.log("fail!")}function v(e){var t="";return t+="translate("+b(e.tx,6)+"px,"+b(e.ty,6)+"px) ",t+="rotate("+b(e.r,6)+"rad) skewX("+b(e.k,6)+"rad) ",t+="scale("+b(e.sx,6)+","+b(e.sy,6)+")"}function x(e,t){var o,r=s.getElementTransform(e);o=r?new PureCSSMatrix(r):new PureCSSMatrix,t&&(o=o.translate(t.x,t.y));var n=g(o);return n.r=function(e){var t,o=0;for(;null!==(t=m.exec(e));){var r=t[1].toLowerCase(),n=t[2].split(",");if("matrix"==r){var a=r+"("+t[2]+")";o+=g(new PureCSSMatrix(a)).r}else if("rotate"==r){var i=n[0],s=parseFloat(i.match(f));i.match(d)&&(s=2*Math.PI*s/360),o+=s}}return o}(r),n}function y(e,t){if(Math.abs(e.r-t.r)>Math.PI)if(t.r<e.r)for(;Math.abs(e.r-t.r)>Math.PI;)t.r+=2*Math.PI;else for(;Math.abs(e.r-t.r)>Math.PI;)t.r-=2*Math.PI;return t}function b(e,t){t=Math.abs(parseInt(t,10))||0;var o=Math.pow(10,t);return Math.round(e*o)/o}jQuery.cssHooks.MsTransform={set:function(e,t){e.style.msTransform=t}},jQuery.cssHooks.MsTransformOrigin={set:function(e,t){e.style.msTransformOrigin=t}},l.fn.animateTransformation=function(r,n,a,i,s){n=jQuery.extend({},t,n),e&&(clearTimeout(e),e=null),n.nativeanimation&&i&&(e=setTimeout(i,n.duration)),this.each(function(){var e=l(this);r||(r=new PureCSSMatrix);var t=x(e,a),o=y(t,g(r));n.nativeanimation?(e.css(h(v(o),n.duration,n.easing)),s&&s()):function(e,t,o,r,n,a){t||(t=g(new PureCSSMatrix));u=(new Date).getTime(),c&&(clearInterval(c),c=null);r.easing&&(r.easingfunction=function(e,t){var o=[];if(e instanceof Array)o=e;else switch(e){case"linear":o=[0,0,1,1];break;case"ease":o=[.25,.1,.25,1];break;case"ease-in":o=[.42,0,1,1];break;case"ease-out":o=[0,0,.58,1];break;case"ease-in-out":o=[.42,0,.58,1]}return function(e){return function(e,t,o,r,n,a){var c=0,f=0,m=0,i=0,s=0,l=0;function d(e){return((c*e+f)*e+m)*e}return c=1-(m=3*t)-(f=3*(r-t)-m),i=1-(l=3*o)-(s=3*(n-o)-l),u=e,g=a,h=1/(200*g),p=function(e,t){var o,r,n,a,i,s,l;function u(e){return 0<=e?e:0-e}for(n=e,s=0;s<8;s++){if(u(a=d(n)-e)<t)return n;if(u(i=(3*c*(l=n)+2*f)*l+m)<1e-6)break;n-=a/i}if(r=1,(n=e)<(o=0))return o;if(r<n)return r;for(;o<r;){if(u((a=d(n))-e)<t)return n;a<e?o=n:r=n,n=.5*(r-o)+o}return n}(u,h),((i*p+s)*p+l)*p;var u,h,p;var g}(e,o[0],o[1],o[2],o[3],t)}}(r.easing,r.duration));p(e,t,o,r,n),a&&a();c=setInterval(function(){p(e,t,o,r,n)},1)}(e,t,o,n,i,s)})},l.fn.setTransformation=function(o){this.each(function(){var e=l(this),t=y(x(e),g(o));e.css(h(v(t)))})}}(jQuery),function(b){"use strict";var v=b.zoomooz.helpers,s=["duration","easing","nativeanimation"];function x(e,t){var o=e.data("original-scroll");return o||(o={elem:t,x:0,"y:":0}),o}function a(e,t,o){return[e.a*t+e.c*o+e.e,e.b*t+e.d*o+e.f]}function i(e){var t="width:4px;height:4px;background-color:red;position:absolute;margin-left:-2px;margin-top:-2px;",o='<div class="debuglabel" style="'+(t+="left:"+e[0]+"px;top:"+e[1]+"px;")+'"></div>';b("#debug").append(o)}function y(e,t){var o=e[0];if(!o||!o.ownerDocument)return null;var r,n,a=new PureCSSMatrix;if(o===o.ownerDocument.body){var i=jQuery.offset.bodyOffset(o);return r=(r=new PureCSSMatrix).translate(i.left,i.top),a=a.multiply(r)}jQuery.offset.initialize?(jQuery.offset.initialize(),n={fixedPosition:jQuery.offset.supportsFixedPosition,doesNotAddBorder:jQuery.offset.doesNotAddBorder,doesAddBorderForTableAndCells:jQuery.support.doesAddBorderForTableAndCells,subtractsBorderForOverflowNotVisible:jQuery.offset.subtractsBorderForOverflowNotVisible}):n=jQuery.support;var s,l,u=o.offsetParent,c=o.ownerDocument,f=c.documentElement,m=c.body,d=t[0],h=c.defaultView;l=h?h.getComputedStyle(o,null):o.currentStyle;var p=o.offsetTop,g=o.offsetLeft,v=M().translate(g,p);for(a=(v=v.multiply(M(o))).multiply(a);(o=o.parentNode)&&o!==d&&(g=p=0,!n.fixedPosition||"fixed"!==l.position);)s=h?h.getComputedStyle(o,null):o.currentStyle,p-=o.scrollTop,g-=o.scrollLeft,o===u&&(p+=o.offsetTop,g+=o.offsetLeft,!n.doesNotAddBorder||n.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(o.nodeName)||(p+=parseFloat(s.borderTopWidth)||0,g+=parseFloat(s.borderLeftWidth)||0),u=o.offsetParent),n.subtractsBorderForOverflowNotVisible&&"visible"!==s.overflow&&(p+=parseFloat(s.borderTopWidth)||0,g+=parseFloat(s.borderLeftWidth)||0),l=s,o.offsetParent==d&&(p-=parseFloat(b(o.offsetParent).css("margin-top"))||0,g-=parseFloat(b(o.offsetParent).css("margin-left"))||0),a=(v=(v=M().translate(g,p)).multiply(M(o))).multiply(a);g=p=0,"relative"!==l.position&&"static"!==l.position||(p+=m.offsetTop,g+=m.offsetLeft),n.fixedPosition&&"fixed"===l.position&&(p+=Math.max(f.scrollTop,m.scrollTop),g+=Math.max(f.scrollLeft,m.scrollLeft));var x=(new PureCSSMatrix).translate(g,p);return a=a.multiply(x)}function z(e){return Number(e).toFixed(6)}function M(e){var t=v.getElementTransform(e);return t?new PureCSSMatrix(t):new PureCSSMatrix}!function(){var t=document.createElement("style");t.type="text/css";var o="";v.forEachPrefix(function(e){o+=e+"transform-origin: 0 0;"},!0),t.innerHTML="html {height:100%;}.noScroll{overflow:hidden !important;}* {"+o+"}",b(document).ready(function(){document.getElementsByTagName("head")[0].appendChild(t);var e=window.innerWidth-b("body").width();t.innerHTML+="body.noScroll,html.noScroll body{margin-right:"+e+"px;}"})}(),b.zoomooz||(b.zoomooz={}),b.zoomooz.setup=function(e){var t,o;b.zoomooz.defaultSettings=jQuery.extend((t={targetsize:.9,scalemode:"both",root:b(document.body),debug:!1,animationendcallback:null,closeclick:!1},o=void 0!==window.mozInnerScreenX,t.scrollresetbeforezoom=o,t),e)},b.fn.zoomSettings=function(t){var o;return this.each(function(){var e=b(this);o=function(e,t){var o=jQuery.extend({},t);b.zoomooz.defaultSettings||b.zoomooz.setup();var r,n=b.zoomooz.defaultSettings,a=jQuery.extend({},o);for(r in n)n.hasOwnProperty(r)&&!a[r]&&(a[r]=e.data(r));for(var i=0;i<s.length;i++)a[r=s[i]]||(a[r]=e.data(r));return jQuery.extend({},n,a)}(e,t)}),o},b.fn.zoomTo=function(r,n){return this.each(function(){var e,t,o=b(this);n||(r=o.zoomSettings(r)),function(o,r){var e,t,n=r.scrollresetbeforezoom,a=null;i=r.root,s=i.parent(),o[0]===i[0]?a=x(i,s):i.data("original-scroll")?n||(a=x(i,s)):(e=!0,a=function(t,e,o){var r=t.scrollTop(),n=t.scrollLeft(),a=t;r||(r=e.scrollTop(),n=e.scrollLeft(),a=e);var i={elem:a,x:n,y:r};t.data("original-scroll",i),b(document).on("touchmove",function(e){e.preventDefault()});var s="translate(-"+n+"px,-"+r+"px)";return v.forEachPrefix(function(e){t.css(e+"transform",s)}),a.addClass("noScroll"),o&&(i.animationstartedcallback=function(){a[0]==document.body||a[0]==document?window.scrollTo(0,0):(a.scrollLeft(0),a.scrollTop(0))}),i}(i,s,n));var i,s;var l=null;u=r.root,c=b(u).parent(),f=c.width(),m=c.height()/2,d=z(f/2)+"px "+z(m)+"px",v.forEachPrefix(function(e){u.css(e+"transform-origin",d)});var u,c,f,m,d;var h=null;if(o[0]!==r.root[0]){var p=y(o,r.root).inverse();n||(h=a),t=function(e,t,o,r){var n,a=r.targetsize,i=r.scalemode,s=r.root,l=b(s).parent(),u=l.width(),c=l.height(),f=u/e.outerWidth(),m=c/e.outerHeight();if("width"==i)n=a*f;else if("height"==i)n=a*m;else if("both"==i)n=a*Math.min(f,m);else{if("scale"!=i)return void console.log("wrong zoommode");n=a}var d=(u-e.outerWidth()*n)/2,h=(c-e.outerHeight()*n)/2,p=u/2,g=c/2,v=-parseFloat(s.css("margin-left"))||0,x=-parseFloat(s.css("margin-top"))||0,y=new PureCSSMatrix;o&&(y=y.translate(o.x,o.y));return y.translate(v,x).translate(-p,-g).translate(d,h).scale(n,n).multiply(t).translate(p,g)}(o,p,h,r),r.animationendcallback&&(l=function(){r.animationendcallback.call(o[0])})}else n&&(t=(new PureCSSMatrix).translate(-a.x,-a.y)),l=function(){var e=b(r.root),t=a.elem;t.removeClass("noScroll"),e.setTransformation(new PureCSSMatrix),e.data("original-scroll",null),b(document).off("touchmove"),n&&(t[0]==document.body||t[0]==window?window.scrollTo(a.x,a.y):(t.scrollLeft(a.x),t.scrollTop(a.y))),r.animationendcallback&&r.animationendcallback.call(o[0])};var g=null;n&&a&&a.animationstartedcallback&&(g=a.animationstartedcallback);e||(h=!1);b(r.root).animateTransformation(t,r,h,l,g)}(o,r),r.debug?(0===b("#debug").length?b(r.root).append('<div id="debug"><div>'):b("#debug").html(""),i(a(t=y(e=o,r.root).elements(),0,0)),i(a(t,0,e.outerHeight())),i(a(t,e.outerWidth(),e.outerHeight())),i(a(t,e.outerWidth(),0))):0!==b("#debug").length&&b("#debug").html("")}),this}}(jQuery),function(s){"use strict";s.zoomooz||(s.zoomooz={});var r=s.zoomooz.helpers;s.fn.zoomTarget=function(t){this.each(function(){var e=s(this).zoomSettings(t);!function e(t,o,r){t.addClass("zoomTarget");r.animationendcallback||(r.closeclick?r.animationendcallback=function(){s(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),t.addClass("selectedZoomTarget")}:r.animationendcallback=function(){s(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),t.addClass("selectedZoomTarget zoomNotClickable")});var n=o.closest(".zoomContainer");0!==n.length&&(r.root=n);var a=r.root;if(!a.hasClass("zoomTarget")){var i=a.zoomSettings({});i.animationendcallback=function(){var e=s(this);s(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),e.addClass("selectedZoomTarget zoomNotClickable"),e.parent().addClass("selectedZoomTarget zoomNotClickable")},e(a,a,i),e(a.parent(),a,i),a.click()}t.bind("mousewheel DOMMouseScroll",function(e){r.closeclick&&o.hasClass("selectedZoomTarget")?(console.log("Clicking target!"),r.root.trigger("mousewheel"),r.root.trigger("DOMMouseScroll")):o.zoomTo(r),e.stopPropagation()})}(s(this),s(this),e)})},s(document).ready(function(){!function(){var e=document.createElement("style");function t(t){var o="-webkit-touch-callout: "+(t?"default":"none")+";";return r.forEachPrefix(function(e){o+=e+"user-select:"+(t?"text":"none")+";"},!0),o}e.type="text/css",e.innerHTML=".zoomTarget{"+t(!1)+"}.zoomTarget:hover{cursor:pointer!important;}.zoomNotClickable{"+t(!0)+"}.zoomNotClickable:hover{cursor:auto!important;}.zoomContainer{position:relative;padding:1px;margin:-1px;}",document.getElementsByTagName("head")[0].appendChild(e)}(),s(".zoomTarget").zoomTarget()})}(jQuery),function(e){"use strict";e.zoomooz||(e.zoomooz={}),e.fn.zoomContainer=function(e){},e(document).ready(function(){e(".zoomContainer").zoomContainer()})}(jQuery),function(a){a.zoomooz||(a.zoomooz={});a.zoomooz.helpers;a.fn.zoomButton=function(t){this.each(function(){var e=function(e,t){var o={type:"next",root:a(document.body),wrap:"true"},r=jQuery.extend({},t);for(var n in o)o.hasOwnProperty(n)&&!r[n]&&(o[n]instanceof jQuery?r[n]=a(e.data(n)):r[n]=e.data(n));return jQuery.extend({},o,r)}(a(this),t);!function(e,n){var a;e.addClass("zoomButton"),a=n.root.hasClass("zoomContainer")?n.root:n.root.find(".zoomContainer");var i=function(){var o=jQuery.makeArray(a.find(".zoomTarget"));function r(e){return o.indexOf(e)}return{next:function(e){var t=r(e)+1;return t<o.length&&0!==t?o[t]:null},prev:function(e){var t=r(e)-1;return t<0?null:o[t]},last:function(){return o[o.length-1]},first:function(){return o[0]}}}();e.on("click",function(e){var t,o=!0,r=a.find(".selectedZoomTarget");0===r.length&&(r=i.first()),0===n.type.indexOf("prev")?null===(t=i.prev(r[0]))&&(n.wrap?t=i.last():o=!1):null===(t=i.next(r[0]))&&(n.wrap?t=i.first():o=!1),o&&t.click(),e.stopPropagation()})}(a(this),e)})},a(document).ready(function(){a(".zoomButton").zoomButton()})}(jQuery);